{"version":3,"file":"index.stories-ef72fc07.js","sources":["../../node_modules/react-laag/dist/react-laag.esm.js","../../packages/ui-react/src/components/popover/index.tsx"],"sourcesContent":["import { useRef, useState, useMemo, useLayoutEffect, useEffect, useCallback, createElement, useContext, createContext, forwardRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport warning from 'tiny-warning';\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n/**\r\n * Utility hook to track the reference of a html-element.\r\n * It notifies the listener when a change occured, so it can act\r\n * on the change\r\n */\n\nfunction useTrackRef(onRefChange) {\n  var storedReference = useRef(null); // this is de function that actually gets passed to the `ref` prop\n  // on the html element. I.e.:\n  // <div ref={setter} />\n\n  function setter(element) {\n    if (!element || element === storedReference.current) {\n      return;\n    }\n\n    storedReference.current = element;\n    onRefChange(element);\n  }\n\n  return setter;\n}\n/**\r\n * Utility hook that stores mutable state.\r\n * Since a getter function is used, it will always return the most\r\n * up-to-date state. This is useful when you want to get certain state within\r\n * an effect, without triggering the same effect when the same state changes.\r\n * Note: may be seen as an anti-pattern.\r\n */\n\nfunction useMutableStore(initialState) {\n  var state = useRef(initialState);\n  return useMemo(function () {\n    function set(setter) {\n      if (typeof setter === \"function\") {\n        state.current = setter(state.current);\n      } else {\n        state.current = setter;\n      }\n    }\n\n    function get() {\n      return state.current;\n    }\n\n    return [get, set];\n  }, []);\n}\n/**\r\n * Utility hook that keeps track of active event listeners and how\r\n * to remove these listeners\r\n */\n\nfunction useEventSubscriptions() {\n  var subscriptions = useRef([]);\n  return useMemo(function () {\n    function hasEventSubscriptions() {\n      return subscriptions.current.length > 0;\n    }\n\n    function removeAllEventSubscriptions() {\n      for (var _iterator = _createForOfIteratorHelperLoose(subscriptions.current), _step; !(_step = _iterator()).done;) {\n        var unsubscribe = _step.value;\n        unsubscribe();\n      }\n\n      subscriptions.current = [];\n    }\n\n    function addEventSubscription(unsubscriber) {\n      subscriptions.current.push(unsubscriber);\n    }\n\n    return {\n      hasEventSubscriptions: hasEventSubscriptions,\n      removeAllEventSubscriptions: removeAllEventSubscriptions,\n      addEventSubscription: addEventSubscription\n    };\n  }, []);\n}\n/**\r\n * SSR-safe effect hook\r\n */\n\nvar useIsomorphicLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n/**\r\n * Utility hook that tracks an state object.\r\n * If `enabled=false` it will discard changes and reset the lastState to `null`\r\n */\n\nfunction useLastState(currentState, enabled) {\n  var lastState = useRef(currentState);\n\n  if (!enabled) {\n    lastState.current = null;\n    return lastState;\n  }\n\n  lastState.current = currentState;\n  return lastState;\n}\nvar EMPTY_BOUNDS = {\n  top: 0,\n  left: 0,\n  right: 1,\n  bottom: 1,\n  width: 1,\n  height: 1\n};\n/**\r\n * @description Utility hook that lets you use the mouse-position as source of the trigger.\r\n * This is useful in scenario's like context-menu's.\r\n *\r\n * @example\r\n * ```tsx\r\n * const {\r\n *  hasMousePosition,\r\n *  resetMousePosition,\r\n *  handleMouseEvent,\r\n *  trigger\r\n *  } = useMousePositionAsTrigger();\r\n *\r\n * const { renderLayer, layerProps } = useLayer({\r\n *  isOpen: hasMousePosition,\r\n *  trigger,\r\n *  onOutsideClick: resetMousePosition\r\n * });\r\n *\r\n * return (\r\n *  <>\r\n *   {isOpen && renderLayer(<div {...layerProps} />)}\r\n *   <div onContextMenu={handleMouseEvent} />\r\n *  </>\r\n * );\r\n * ```\r\n */\n\nfunction useMousePositionAsTrigger(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$enabled = _ref.enabled,\n      enabled = _ref$enabled === void 0 ? true : _ref$enabled,\n      _ref$preventDefault = _ref.preventDefault,\n      preventDefault = _ref$preventDefault === void 0 ? true : _ref$preventDefault;\n\n  var parentRef = useRef(null);\n\n  var _useState = useState(EMPTY_BOUNDS),\n      mouseBounds = _useState[0],\n      setMouseBounds = _useState[1];\n\n  function resetMousePosition() {\n    setMouseBounds(EMPTY_BOUNDS);\n  }\n\n  var hasMousePosition = mouseBounds !== EMPTY_BOUNDS;\n\n  function handleMouseEvent(evt) {\n    if (!enabled) {\n      return;\n    }\n\n    if (preventDefault) {\n      evt.preventDefault();\n    }\n\n    var left = evt.clientX,\n        top = evt.clientY;\n    setMouseBounds({\n      top: top,\n      left: left,\n      width: 1,\n      height: 1,\n      right: left + 1,\n      bottom: top + 1\n    });\n  }\n\n  return {\n    hasMousePosition: hasMousePosition,\n    resetMousePosition: resetMousePosition,\n    handleMouseEvent: handleMouseEvent,\n    trigger: {\n      getBounds: function getBounds() {\n        return mouseBounds;\n      },\n      getParent: parentRef.current ? function () {\n        return parentRef.current;\n      } : undefined\n    },\n    parentRef: parentRef\n  };\n}\n\n/**\r\n * Convert a pixel value into a numeric value\r\n * @param value string value (ie. '12px')\r\n */\nfunction getPixelValue(value) {\n  return parseFloat(value.replace(\"px\", \"\"));\n}\n/**\r\n * Returns a numeric value that doesn't exceed min or max\r\n */\n\nfunction limit(value, min, max) {\n  return value < min ? min : value > max ? max : value;\n}\n/**\r\n * Utility function which ensures whether a value is truthy\r\n */\n\nfunction isSet(value) {\n  return value === null || value === undefined ? false : true;\n}\n/**\r\n * Utility function that let's you assign multiple references to a 'ref' prop\r\n * @param refs list of MutableRefObject's and / or callbacks\r\n */\n\nfunction mergeRefs() {\n  for (var _len = arguments.length, refs = new Array(_len), _key = 0; _key < _len; _key++) {\n    refs[_key] = arguments[_key];\n  }\n\n  return function (element) {\n    for (var _iterator = _createForOfIteratorHelperLoose(refs), _step; !(_step = _iterator()).done;) {\n      var ref = _step.value;\n\n      if (!ref) {\n        continue;\n      }\n\n      if (typeof ref === \"function\") {\n        ref(element);\n      } else {\n        ref.current = element;\n      }\n    }\n  };\n}\n\n/**\r\n * Utility to get the correct ResizeObserver class\r\n */\n\nfunction getResizeObserver(environment, polyfill) {\n  if (typeof environment === \"undefined\") {\n    return undefined;\n  }\n\n  return polyfill || environment.ResizeObserver;\n}\n/**\r\n * Utility function that given a element traverses up in the html-hierarchy\r\n * to find and return all ancestors that have scroll behavior\r\n */\n\nfunction findScrollContainers(element, environment) {\n  var result = [];\n\n  if (!element || !environment || element === document.body) {\n    return result;\n  }\n\n  var _environment$getCompu = environment.getComputedStyle(element),\n      overflow = _environment$getCompu.overflow,\n      overflowX = _environment$getCompu.overflowX,\n      overflowY = _environment$getCompu.overflowY;\n\n  if ([overflow, overflowX, overflowY].some(function (prop) {\n    return [\"auto\", \"scroll\"].includes(prop);\n  })) {\n    result.push(element);\n  }\n\n  return [].concat(result, findScrollContainers(element.parentElement, environment));\n}\n\nfunction createReferenceError(subject) {\n  return \"react-laag: Could not find a valid reference for the \" + subject + \" element. There might be 2 causes:\\n   - Make sure that the 'ref' is set correctly on the \" + subject + \" element when isOpen: true. Also make sure your component forwards the ref with \\\"forwardRef()\\\".\\n   - Make sure that you are actually rendering the \" + subject + \" when the isOpen prop is set to true\";\n}\n/**\r\n * This hook has the responsibility to track the bounds of:\r\n * - the trigger element\r\n * - the layer element\r\n * - the arrow element\r\n * - the scroll-containers of which the trigger element is a descendant of\r\n *\r\n * It will call the `onChange` callback with a collection of these elements when any\r\n * of the tracked elements bounds have changed\r\n *\r\n * It will detect these changes by listening:\r\n * - when the reference of the trigger element changes\r\n * - when the reference of the layer element changes\r\n * - when the trigger, layer or document body changes in size\r\n * - when the user scrolls the page, or any of the scroll containers\r\n */\n\n\nfunction useTrackElements(_ref) {\n  var enabled = _ref.enabled,\n      onChange = _ref.onChange,\n      environment = _ref.environment,\n      ResizeObserverPolyfill = _ref.ResizeObserverPolyfill,\n      overflowContainer = _ref.overflowContainer,\n      triggerOption = _ref.triggerOption;\n  // get the correct reference to the ResizeObserver class\n  var ResizeObserver = getResizeObserver(environment, ResizeObserverPolyfill); // warn the user when no valid ResizeObserver class could be found\n\n  useEffect(function () {\n    process.env.NODE_ENV !== \"production\" ? warning(ResizeObserver, \"This browser does not support ResizeObserver out of the box. We recommend to add a polyfill in order to utilize the full capabilities of react-laag. See: https://github.com/everweij/react-laag#resize-observer\") : void 0;\n  }, [ResizeObserver]); // keep reference of the optional arrow-component\n\n  var arrowRef = useRef(null); // if user has provided the trigger-option we should ingore certain things elsewhere\n\n  var hasTriggerOption = Boolean(triggerOption); // Keep track of mutable element related state\n  // It is generally better to use React.useState, but unfortunately that causes to many re-renders\n\n  var _useMutableStore = useMutableStore({\n    scrollContainers: [],\n    trigger: null,\n    layer: null\n  }),\n      get = _useMutableStore[0],\n      set = _useMutableStore[1]; // utility to keep track of the scroll and resize listeners and how to unsubscribe them\n\n\n  var _useEventSubscription = useEventSubscriptions(),\n      hasEventSubscriptions = _useEventSubscription.hasEventSubscriptions,\n      addEventSubscription = _useEventSubscription.addEventSubscription,\n      removeAllEventSubscriptions = _useEventSubscription.removeAllEventSubscriptions; // All scroll and resize changes eventually end up here, where the collection of bounds (subjectsBounds) is\n  // constructed in order to notifiy the `onBoundsChange` callback\n\n\n  var handleChange = useCallback(function handleChange() {\n    var _get = get(),\n        layer = _get.layer,\n        trigger = _get.trigger,\n        scrollContainers = _get.scrollContainers;\n\n    var closestScrollContainer = scrollContainers[0];\n\n    if (!layer) {\n      throw new Error(createReferenceError(\"layer\"));\n    } // ignore when user has provided the trigger-option\n\n\n    if (!trigger && !hasTriggerOption) {\n      throw new Error(createReferenceError(\"trigger\"));\n    }\n\n    var scrollOffsets = {\n      top: 0,\n      left: 0\n    };\n\n    if (closestScrollContainer) {\n      var scrollLeft = closestScrollContainer.scrollLeft,\n          scrollTop = closestScrollContainer.scrollTop;\n      scrollOffsets = {\n        top: scrollTop,\n        left: scrollLeft\n      };\n    } else {\n      var scrollX = environment.scrollX,\n          scrollY = environment.scrollY;\n      scrollOffsets = {\n        top: scrollY,\n        left: scrollX\n      };\n    }\n\n    var borderOffsets = {\n      left: 0,\n      top: 0\n    };\n\n    if (closestScrollContainer) {\n      var _environment$getCompu2 = environment.getComputedStyle(closestScrollContainer),\n          borderLeftWidth = _environment$getCompu2.borderLeftWidth,\n          borderTopWidth = _environment$getCompu2.borderTopWidth;\n\n      borderOffsets = {\n        left: getPixelValue(borderLeftWidth) || 0,\n        top: getPixelValue(borderTopWidth) || 0\n      };\n    }\n\n    onChange({\n      layer: layer,\n      trigger: trigger,\n      scrollContainers: scrollContainers,\n      arrow: arrowRef.current\n    }, scrollOffsets, borderOffsets);\n  }, [get, onChange, environment, arrowRef, hasTriggerOption]); // responsible for adding the scroll and resize listeners to the correct\n  // html elements\n\n  var addEventListeners = useCallback(function addEventListeners() {\n    var _get2 = get(),\n        trigger = _get2.trigger,\n        layer = _get2.layer,\n        scrollContainers = _get2.scrollContainers;\n\n    if (!layer) {\n      throw new Error(createReferenceError(\"layer\"));\n    }\n\n    if (!trigger && !hasTriggerOption) {\n      // ignore when user has provided the trigger-option\n      throw new Error(createReferenceError(\"trigger\"));\n    }\n\n    if (ResizeObserver) {\n      var ignoredInitialCall = false;\n\n      var observerCallback = function observerCallback() {\n        if (!ignoredInitialCall) {\n          ignoredInitialCall = true;\n          return;\n        }\n\n        handleChange();\n      };\n\n      var observer = new ResizeObserver(observerCallback);\n\n      for (var _i = 0, _arr = [trigger, layer, document.body]; _i < _arr.length; _i++) {\n        var element = _arr[_i];\n        if (element) observer.observe(element);\n      }\n\n      addEventSubscription(function () {\n        for (var _i2 = 0, _arr2 = [trigger, layer, document.body]; _i2 < _arr2.length; _i2++) {\n          var _element = _arr2[_i2];\n          if (_element) observer.unobserve(_element);\n        }\n\n        observer.disconnect();\n      });\n    }\n\n    var listenForScrollElements = [environment].concat(scrollContainers);\n\n    var _loop = function _loop() {\n      var element = _step.value;\n      element.addEventListener(\"scroll\", handleChange);\n      addEventSubscription(function () {\n        return element.removeEventListener(\"scroll\", handleChange);\n      });\n    };\n\n    for (var _iterator = _createForOfIteratorHelperLoose(listenForScrollElements), _step; !(_step = _iterator()).done;) {\n      _loop();\n    }\n  }, [get, addEventSubscription, handleChange, environment, ResizeObserver, hasTriggerOption]); // when either the reference to the trigger or layer element changes\n  // we should reset the event listeners and trigger a `onChange`\n\n  var resetWhenReferenceChangedWhileTracking = useCallback(function (previous, next) {\n    if (enabled && previous && previous !== next) {\n      removeAllEventSubscriptions();\n      addEventListeners();\n      handleChange();\n    }\n  }, [removeAllEventSubscriptions, addEventListeners, handleChange, enabled]); // Logic when reference to layer changes\n\n  var layerRef = useTrackRef(useCallback(function (layer) {\n    var _get3 = get(),\n        previousLayer = _get3.layer; // store new reference\n\n\n    set(function (state) {\n      return _extends({}, state, {\n        layer: layer\n      });\n    }); // check if we should reset the event listeners\n\n    resetWhenReferenceChangedWhileTracking(previousLayer, layer);\n  }, [get, set, resetWhenReferenceChangedWhileTracking]));\n  var getScrollContainers = useCallback(function handleScrollContainers(element) {\n    var scrollContainers = findScrollContainers(element, environment);\n    var closestScrollContainer = scrollContainers[0];\n\n    if (closestScrollContainer) {\n      // Check if we should warn the user about 'position: relative; stuff...'\n      var position = environment.getComputedStyle(closestScrollContainer).position;\n      var closestScrollContainerHasCorrectStyling = [\"relative\", \"absolute\", \"fixed\"].includes(position) || overflowContainer;\n\n      if (!closestScrollContainerHasCorrectStyling) {\n        closestScrollContainer.style.position = \"relative\";\n      }\n\n      process.env.NODE_ENV !== \"production\" ? warning(closestScrollContainerHasCorrectStyling, \"react-laag: Set the 'position' style of the nearest scroll-container to 'relative', 'absolute' or 'fixed', or set the 'overflowContainer' prop to true. This is needed in order to position the layer properly. Currently the scroll-container is positioned: \\\"\" + position + \"\\\". For now, \\\"position: relative;\\\" is added for you, but this behavior might be removed in the future. Visit https://react-laag.com/docs/#position-relative for more info.\") : void 0;\n    }\n\n    return scrollContainers;\n  }, [environment, overflowContainer]); // Logic when reference to trigger changes\n  // Note: this will have no effect when user provided the trigger-option\n\n  var triggerRef = useTrackRef(useCallback(function (trigger) {\n    // collect list of scroll containers\n    var scrollContainers = getScrollContainers(trigger);\n\n    var _get4 = get(),\n        previousTrigger = _get4.trigger; // store new references\n\n\n    set(function (state) {\n      return _extends({}, state, {\n        trigger: trigger,\n        scrollContainers: scrollContainers\n      });\n    }); // check if we should reset the event listeners\n\n    resetWhenReferenceChangedWhileTracking(previousTrigger, trigger);\n  }, [get, set, resetWhenReferenceChangedWhileTracking, getScrollContainers])); // when user has provided the trigger-option, it monitors the optional parent-element\n  // in order to determine the scroll-containers\n\n  var triggerOptionParent = triggerOption == null ? void 0 : triggerOption.getParent == null ? void 0 : triggerOption.getParent();\n  useIsomorphicLayoutEffect(function () {\n    if (!triggerOptionParent) {\n      return;\n    }\n\n    set(function (state) {\n      return _extends({}, state, {\n        scrollContainers: getScrollContainers(triggerOptionParent)\n      });\n    });\n  }, [triggerOptionParent, set, getScrollContainers]);\n  useIsomorphicLayoutEffect(function () {\n    if (enabled) {\n      // add event listeners if necessary\n      if (!hasEventSubscriptions()) {\n        addEventListeners();\n      }\n    }\n\n    return function () {\n      if (hasEventSubscriptions()) {\n        removeAllEventSubscriptions();\n      }\n    };\n  }, [enabled, hasEventSubscriptions, addEventListeners, removeAllEventSubscriptions]); // run this effect after every render\n\n  useIsomorphicLayoutEffect(function () {\n    if (enabled) {\n      // eventually call `handleChange` with latest elements-refs\n      handleChange();\n    }\n  });\n  return {\n    triggerRef: triggerRef,\n    layerRef: layerRef,\n    arrowRef: arrowRef,\n    closestScrollContainer: get().scrollContainers[0] || null\n  };\n}\n\nvar GroupContext = /*#__PURE__*/createContext({}); // Provider that wraps arround the layer in order to provide other useLayers\n// down in the hiearchy (child layers) with means to communicate with the parent.\n// This provider receives a `registrations` Set which can be used to add and\n// delete registrations.\n\nfunction GroupProvider(_ref) {\n  var children = _ref.children,\n      registrations = _ref.registrations;\n  // registration function that is used as 'context payload' for child layers\n  // to call. It returns a function to unregister.\n  var handleRegister = useCallback(function register(registration) {\n    registrations.current.add(registration);\n    return function () {\n      return registrations.current.delete(registration);\n    };\n  }, [registrations]);\n  return createElement(GroupContext.Provider, {\n    value: handleRegister\n  }, children);\n} // asks child layers if they would close given the documents click event\n// if there's one that signals not to close, return early (false)\n\nfunction getShouldCloseAccordingToChildren(registrations, event) {\n  for (var _iterator = _createForOfIteratorHelperLoose(registrations), _step; !(_step = _iterator()).done;) {\n    var shouldCloseWhenClickedOutside = _step.value.shouldCloseWhenClickedOutside;\n\n    if (!shouldCloseWhenClickedOutside(event)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\r\n * Responsible for close behavior\r\n * When the `onOutsideClick` callback is provided by the user, it will listen for clicks\r\n * in the document, and tell whether the user clicked outside -> not on layer / trigger.\r\n * It keeps track of nested useLayers a.k.a child layers (`registrations` Set), through which\r\n * we can ask whether they `shouldCloseWhenClickedOutside`, or tell them to close.\r\n *\r\n * Behavior:\r\n * - `onOutsideClick` only works on the most outer parent, and not on children. The parent will ask\r\n *   the child layers whether they would close, and will handle accordingly. The parent may\r\n *   command the children to close indirectly with the help of `onParentClose`\r\n * - When the parent just was closed, it will make sure that any children will also close\r\n *   with the help of `onParentClose`\r\n */\n\n\nfunction useGroup(_ref2) {\n  var isOpen = _ref2.isOpen,\n      onOutsideClick = _ref2.onOutsideClick,\n      onParentClose = _ref2.onParentClose;\n  // store references to the dom-elements\n  // we need these to later determine wether the clicked outside or not\n  var trigger = useRef(null);\n  var layer = useRef(null); // a Set which keeps track of callbacks given by the child layers through context\n\n  var registrations = useRef(new Set()); // if this instance is a child itself, we should use this function to register\n  // some callbacks to the parent\n\n  var possibleRegisterFn = useContext(GroupContext); // recursively checks whether to close or not. This mechanism has some similarities\n  // with event bubbling.\n\n  var shouldCloseWhenClickedOutside = useCallback(function shouldCloseWhenClickedOutside(event) {\n    var target = event.target;\n    var clickedOnTrigger = trigger.current && trigger.current.contains(target);\n    var clickedOnLayer = layer.current && layer.current.contains(target);\n    var shouldCloseAccordingToChildren = getShouldCloseAccordingToChildren(registrations.current, event); // when clicked on own layer, but the child would have closed ->\n    // let child close\n\n    if (clickedOnLayer && shouldCloseAccordingToChildren) {\n      registrations.current.forEach(function (_ref3) {\n        var closeChild = _ref3.closeChild;\n        return closeChild();\n      });\n    }\n\n    return !clickedOnTrigger && !clickedOnLayer && shouldCloseAccordingToChildren;\n  }, [trigger, layer, registrations]); // registration stuff\n\n  useEffect(function () {\n    if (typeof possibleRegisterFn !== \"function\") {\n      return;\n    } // 'possibleRegisterFn' will return a function that will unregister\n    // on cleanup\n\n\n    return possibleRegisterFn({\n      shouldCloseWhenClickedOutside: shouldCloseWhenClickedOutside,\n      closeChild: function closeChild() {\n        process.env.NODE_ENV !== \"production\" ? warning(onParentClose, \"react-laag: You are using useLayer() in a nested setting but forgot to set the 'onParentClose()' callback in the options. This could lead to unexpected behavior.\") : void 0;\n\n        if (onParentClose) {\n          onParentClose();\n        }\n      }\n    });\n  }, [possibleRegisterFn, shouldCloseWhenClickedOutside, onParentClose, registrations]); // document click handling\n\n  useEffect(function () {\n    var isChild = typeof possibleRegisterFn === \"function\";\n    var shouldNotListen = !isOpen || !onOutsideClick || isChild;\n\n    if (shouldNotListen) {\n      return;\n    }\n\n    function handleClick(event) {\n      if (shouldCloseWhenClickedOutside(event)) {\n        onOutsideClick();\n      }\n    }\n\n    document.addEventListener(\"click\", handleClick, true);\n    return function () {\n      return document.removeEventListener(\"click\", handleClick, true);\n    };\n  }, [isOpen, onOutsideClick, shouldCloseWhenClickedOutside, possibleRegisterFn]); // When this 'useLayer' gets closed -> tell child layers to close as well\n\n  useEffect(function () {\n    if (!isOpen) {\n      registrations.current.forEach(function (_ref4) {\n        var closeChild = _ref4.closeChild;\n        return closeChild();\n      });\n    }\n  }, [isOpen]);\n  return {\n    closeOnOutsideClickRefs: {\n      trigger: trigger,\n      layer: layer\n    },\n    registrations: registrations\n  };\n}\n\nvar PLACEMENT_TYPES = [\"bottom-start\", \"bottom-end\", \"bottom-center\", \"top-start\", \"top-center\", \"top-end\", \"left-end\", \"left-center\", \"left-start\", \"right-end\", \"right-center\", \"right-start\", \"center\"];\n\nvar OPPOSITES = {\n  top: \"bottom\",\n  left: \"right\",\n  bottom: \"top\",\n  right: \"left\",\n  center: \"center\"\n};\n\nvar SideBase = /*#__PURE__*/function () {\n  function SideBase(prop, opposite, isHorizontal, sizeProp, oppositeSizeProp, cssProp, oppositeCssProp, isCenter, isPush // left | top\n  ) {\n    this.prop = void 0;\n    this.opposite = void 0;\n    this.isHorizontal = void 0;\n    this.sizeProp = void 0;\n    this.oppositeSizeProp = void 0;\n    this.cssProp = void 0;\n    this.oppositeCssProp = void 0;\n    this.isCenter = void 0;\n    this.isPush = void 0;\n    this.prop = prop;\n    this.opposite = opposite;\n    this.isHorizontal = isHorizontal;\n    this.sizeProp = sizeProp;\n    this.oppositeSizeProp = oppositeSizeProp;\n    this.cssProp = cssProp;\n    this.oppositeCssProp = oppositeCssProp;\n    this.isCenter = isCenter;\n    this.isPush = isPush;\n  }\n\n  var _proto = SideBase.prototype;\n\n  _proto.factor = function factor(value) {\n    return value * (this.isPush ? 1 : -1);\n  };\n\n  _proto.isOppositeDirection = function isOppositeDirection(side) {\n    return this.isHorizontal !== side.isHorizontal;\n  };\n\n  return SideBase;\n}();\n\nfunction createSide(prop, recursive) {\n  if (recursive === void 0) {\n    recursive = true;\n  }\n\n  var isHorizontal = [\"left\", \"right\"].includes(prop);\n  return new SideBase(prop, recursive ? createSide(OPPOSITES[prop], false) : null, isHorizontal, isHorizontal ? \"width\" : \"height\", isHorizontal ? \"height\" : \"width\", isHorizontal ? \"left\" : \"top\", isHorizontal ? \"top\" : \"left\", prop === \"center\", ![\"right\", \"bottom\"].includes(prop));\n}\n\nvar BoundSide = {\n  top: /*#__PURE__*/createSide(\"top\"),\n  bottom: /*#__PURE__*/createSide(\"bottom\"),\n  left: /*#__PURE__*/createSide(\"left\"),\n  right: /*#__PURE__*/createSide(\"right\")\n};\nvar Side = /*#__PURE__*/_extends({}, BoundSide, {\n  center: /*#__PURE__*/createSide(\"center\")\n});\n\nvar SIDES = [\"top\", \"left\", \"bottom\", \"right\"];\n/**\r\n * A class containing the positional properties which represent the distance\r\n * between two Bounds instances for each side\r\n */\n\nvar BoundsOffsets = /*#__PURE__*/function () {\n  function BoundsOffsets(offsets) {\n    this.top = void 0;\n    this.left = void 0;\n    this.right = void 0;\n    this.bottom = void 0;\n    return Object.assign(this, offsets);\n  }\n  /**\r\n   * Takes multiple BoundsOffets instances and creates a new BoundsOffsets instance\r\n   * by taking the smallest value for each side\r\n   * @param boundsOffsets list of BoundsOffsets instances\r\n   */\n\n\n  BoundsOffsets.mergeSmallestSides = function mergeSmallestSides(boundsOffsets) {\n    var first = boundsOffsets[0],\n        rest = boundsOffsets.slice(1);\n\n    if (!first) {\n      throw new Error(\"Please provide at least 1 bounds objects in order to merge\");\n    }\n\n    var result = Object.fromEntries(SIDES.map(function (side) {\n      return [side, first[side]];\n    }));\n\n    for (var _iterator = _createForOfIteratorHelperLoose(rest), _step; !(_step = _iterator()).done;) {\n      var boundsOffset = _step.value;\n\n      for (var _iterator2 = _createForOfIteratorHelperLoose(SIDES), _step2; !(_step2 = _iterator2()).done;) {\n        var side = _step2.value;\n        result[side] = Math.min(result[side], boundsOffset[side]);\n      }\n    }\n\n    return new BoundsOffsets(result);\n  }\n  /**\r\n   * Checks whether all sides sides are positive, meaning the corresponding Bounds instance\r\n   * fits perfectly within a parent Bounds instance\r\n   */\n  ;\n\n  _createClass(BoundsOffsets, [{\n    key: \"allSidesArePositive\",\n    get: function get() {\n      var _this = this;\n\n      return SIDES.every(function (side) {\n        return _this[side] >= 0;\n      });\n    }\n    /**\r\n     * Returns a partial IBoundsOffsets with sides that are negative, meaning sides aren't entirely\r\n     * visible in respect to a parent Bounds instance\r\n     */\n\n  }, {\n    key: \"negativeSides\",\n    get: function get() {\n      var _this2 = this;\n\n      return Object.fromEntries(SIDES.filter(function (side) {\n        return _this2[side] < 0;\n      }).map(function (side) {\n        return [side, _this2[side]];\n      }));\n    }\n  }]);\n\n  return BoundsOffsets;\n}();\n\n/**\r\n * Utility function that returns sum of various computed styles\r\n * @param propertyValues list of computed styles (ie. '12px')\r\n */\n\nfunction sumOfPropertyValues() {\n  for (var _len = arguments.length, propertyValues = new Array(_len), _key = 0; _key < _len; _key++) {\n    propertyValues[_key] = arguments[_key];\n  }\n\n  return propertyValues.reduce(function (sum, propertyValue) {\n    return sum + (propertyValue ? getPixelValue(propertyValue) : 0);\n  }, 0);\n}\n\nfunction boundsToObject(_ref) {\n  var top = _ref.top,\n      left = _ref.left,\n      right = _ref.right,\n      bottom = _ref.bottom,\n      width = _ref.width,\n      height = _ref.height;\n  return {\n    top: top,\n    left: left,\n    right: right,\n    bottom: bottom,\n    width: width,\n    height: height\n  };\n}\nvar EMPTY = {\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n  width: 0,\n  height: 0\n};\n/**\r\n * A class containing the positional properties of the native DOM's ClientRect\r\n * (`element.getBoundingClientRect()`), together with some utility methods\r\n */\n\nvar Bounds = /*#__PURE__*/function () {\n  /**\r\n   * Creates a new Bounds class\r\n   * @param bounds An object that adheres to the `IBounds` interface\r\n   */\n  Bounds.create = function create(bounds) {\n    return new Bounds(bounds);\n  }\n  /**\r\n   * Creates a new Bounds class from a DOM-element\r\n   * @param element reference to the DOM-element\r\n   * @param options optional options object\r\n   */\n  ;\n\n  Bounds.fromElement = function fromElement(element, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _options = options,\n        _options$withTransfor = _options.withTransform,\n        withTransform = _options$withTransfor === void 0 ? true : _options$withTransfor,\n        _options$environment = _options.environment,\n        environment = _options$environment === void 0 ? window : _options$environment,\n        _options$withScrollba = _options.withScrollbars,\n        withScrollbars = _options$withScrollba === void 0 ? true : _options$withScrollba;\n    var plain = boundsToObject(element.getBoundingClientRect());\n    var bounds = new Bounds(plain);\n\n    if (!withTransform) {\n      var _environment$getCompu = environment.getComputedStyle(element),\n          width = _environment$getCompu.width,\n          height = _environment$getCompu.height,\n          boxSizing = _environment$getCompu.boxSizing,\n          borderLeft = _environment$getCompu.borderLeft,\n          borderRight = _environment$getCompu.borderRight,\n          borderTop = _environment$getCompu.borderTop,\n          borderBottom = _environment$getCompu.borderBottom,\n          paddingLeft = _environment$getCompu.paddingLeft,\n          paddingRight = _environment$getCompu.paddingRight,\n          paddingTop = _environment$getCompu.paddingTop,\n          paddingBottom = _environment$getCompu.paddingBottom;\n\n      var boxWidth = boxSizing === \"border-box\" ? getPixelValue(width) : sumOfPropertyValues(width, borderLeft, borderRight, paddingLeft, paddingRight);\n      var boxHeight = boxSizing === \"border-box\" ? getPixelValue(height) : sumOfPropertyValues(height, borderTop, borderBottom, paddingTop, paddingBottom);\n      bounds = new Bounds(_extends({}, bounds, {\n        width: boxWidth,\n        height: boxHeight\n      }));\n    }\n\n    if (!withScrollbars) {\n      var scrollbarWidth = bounds.width - element.clientWidth;\n      var scrollbarHeight = bounds.height - element.clientHeight;\n      return bounds.substract({\n        right: scrollbarWidth,\n        bottom: scrollbarHeight\n      });\n    }\n\n    return bounds;\n  }\n  /**\r\n   * Creates an empty Bounds class\r\n   */\n  ;\n\n  Bounds.empty = function empty() {\n    return new Bounds();\n  }\n  /**\r\n   * Creates a Bounds class from the window's dimensions\r\n   * @param environment reference to the window-object (needed when working with iframes for instance). Defaults to `window`\r\n   */\n  ;\n\n  Bounds.fromWindow = function fromWindow(environment) {\n    var _environment$document;\n\n    var scrollingElement = (_environment$document = environment == null ? void 0 : environment.document.scrollingElement) != null ? _environment$document : environment == null ? void 0 : environment.document.documentElement;\n\n    var _ref2 = scrollingElement != null ? scrollingElement : {},\n        _ref2$clientWidth = _ref2.clientWidth,\n        width = _ref2$clientWidth === void 0 ? 0 : _ref2$clientWidth,\n        _ref2$clientHeight = _ref2.clientHeight,\n        height = _ref2$clientHeight === void 0 ? 0 : _ref2$clientHeight;\n\n    return new Bounds({\n      width: width,\n      height: height,\n      right: width,\n      bottom: height\n    });\n  };\n\n  function Bounds(bounds) {\n    if (bounds === void 0) {\n      bounds = {};\n    }\n\n    this.top = void 0;\n    this.left = void 0;\n    this.right = void 0;\n    this.bottom = void 0;\n    this.width = void 0;\n    this.height = void 0;\n    return Object.assign(this, EMPTY, bounds);\n  }\n  /**\r\n   * Returns the square surface of the bounds in pixels\r\n   */\n\n\n  var _proto = Bounds.prototype;\n\n  /**\r\n   * Returns a plain object containing only positional properties\r\n   */\n  _proto.toObject = function toObject() {\n    return boundsToObject(this);\n  };\n\n  _proto.merge = function merge(partialBoundsOrMergeFn) {\n    var current = this.toObject();\n    return new Bounds(_extends({}, current, typeof partialBoundsOrMergeFn === \"function\" ? partialBoundsOrMergeFn(current) : partialBoundsOrMergeFn));\n  }\n  /**\r\n   * Return a new Bounds instance by subtracting each property of the provided IBounds object\r\n   * @param bounds partial IBounds object to substract with\r\n   */\n  ;\n\n  _proto.substract = function substract(bounds) {\n    var result = this.toObject();\n    var entries = Object.entries(bounds);\n\n    for (var _i = 0, _entries = entries; _i < _entries.length; _i++) {\n      var _entries$_i = _entries[_i],\n          prop = _entries$_i[0],\n          value = _entries$_i[1];\n\n      if (prop in BoundSide) {\n        // if `prop` is one of 'top', 'left', 'bottom' or 'right'...\n        var boundSide = BoundSide[prop]; // decide if we should add or substract\n\n        result[prop] += boundSide.factor(value); // make sure that the size-properties are also updated\n\n        result[boundSide.isHorizontal ? \"width\" : \"height\"] -= value;\n      } else {\n        // prop is 'width' or 'height'\n        result[prop] -= value || 0;\n      }\n    }\n\n    return new Bounds(result);\n  }\n  /**\r\n   * Returns a new BoundsOffsets instance by determining the distance for each bound-side:\r\n   * (child -> parent)\r\n   * @param child child bounds instance\r\n   */\n  ;\n\n  _proto.offsetsTo = function offsetsTo(child) {\n    return new BoundsOffsets({\n      top: child.top - this.top,\n      bottom: this.bottom - child.bottom,\n      left: child.left - this.left,\n      right: this.right - child.right\n    });\n  }\n  /**\r\n   * Return a new Bounds instance by mapping over each bound-side\r\n   * @param mapper callback that takes a boundSide + value in pixels, returning a new value for that side\r\n   */\n  ;\n\n  _proto.mapSides = function mapSides(mapper) {\n    var result = this.toObject();\n    var boundSides = Object.values(BoundSide);\n\n    for (var _i2 = 0, _boundSides = boundSides; _i2 < _boundSides.length; _i2++) {\n      var boundSide = _boundSides[_i2];\n      result[boundSide.prop] = mapper(boundSide, result[boundSide.prop]);\n    }\n\n    return new Bounds(result);\n  };\n\n  _createClass(Bounds, [{\n    key: \"surface\",\n    get: function get() {\n      return this.width * this.height;\n    }\n  }]);\n\n  return Bounds;\n}();\n\n/**\r\n * Class for various calculations based on a placement-type. I.e 'top-left';\r\n */\n\nvar Placement = /*#__PURE__*/function () {\n  function Placement(primary, secondary, subjectBounds, layerDimensions, offsets) {\n    this.primary = void 0;\n    this.secondary = void 0;\n    this.offsets = void 0;\n    this.subjectsBounds = void 0;\n    this._cachedLayerBounds = null;\n    this._cachedContainerOffsets = null;\n    this.primary = primary;\n    this.secondary = secondary;\n    this.offsets = offsets;\n    this.setSubjectsBounds(subjectBounds, layerDimensions);\n  }\n  /**\r\n   * Set subjectsBounds that are specific for this placement\r\n   * @param subjectBounds original SubjectBounds instance\r\n   * @param layerDimensions possible config prodvided by the user\r\n   */\n\n\n  var _proto = Placement.prototype;\n\n  _proto.setSubjectsBounds = function setSubjectsBounds(subjectBounds, layerDimensions) {\n    // if user did not provide any layerDimensions config...\n    if (!layerDimensions) {\n      this.subjectsBounds = subjectBounds;\n      return;\n    } // get anticipated layer-dimensions provided by the user\n\n\n    var dimensions = // if the user passed a callback, call it with the layerSide corresponding to\n    // the placement\n    typeof layerDimensions === \"function\" ? layerDimensions(this.primary.prop) : layerDimensions; // create new SubjectsBounds instance by merging our newly create layer-bounds\n\n    this.subjectsBounds = subjectBounds.merge({\n      layer: _extends({}, subjectBounds.layer, dimensions)\n    });\n  }\n  /**\r\n   * Returns the string respresentation of this placement (ie. 'top-start')\r\n   */\n  ;\n\n  /**\r\n   * Calculates the actual boundaries based on the placement\r\n   * @param secondaryOffset optional offset on the secondary-side\r\n   */\n  _proto.getLayerBounds = function getLayerBounds(secondaryOffset) {\n    if (secondaryOffset === void 0) {\n      secondaryOffset = 0;\n    }\n\n    // return cached version if possible\n    if (this._cachedLayerBounds && secondaryOffset === 0) {\n      return this._cachedLayerBounds;\n    }\n\n    var primary = this.primary,\n        secondary = this.secondary,\n        subjectsBounds = this.subjectsBounds;\n    var trigger = subjectsBounds.trigger,\n        layer = subjectsBounds.layer,\n        arrow = subjectsBounds.arrow;\n    var isHorizontal = primary.isHorizontal,\n        oppositeCssProp = primary.oppositeCssProp,\n        oppositeSizeProp = primary.oppositeSizeProp,\n        prop = primary.prop,\n        opposite = primary.opposite;\n    var result = Bounds.empty(); // let's take the placement 'top-start' as an example...\n    // the offsets are the following:\n    // trigger -> 8px\n    // container -> 10px;\n    // arrow -> 2px;\n    // PRIMARY STUFF\n    // bottom = trigger.top + 8;\n\n    result[opposite.prop] = trigger[prop] - primary.factor(this.offsets.trigger); // top = bottom - layer.height\n\n    result[prop] = result[opposite.prop] - primary.factor(layer[primary.sizeProp]); // SECONDARY STUFF\n    // arrowOffsetBase = 4\n\n    var arrowOffsetBase = this.offsets.arrow * 2; // limitMin = trigger.left - (layer.width - arrow.width) + 4\n\n    var limitMin = trigger[oppositeCssProp] - (layer[oppositeSizeProp] - arrow[oppositeSizeProp]) + arrowOffsetBase; // limitMax = trigger.left + (trigger.width - arrow.width) - 4\n\n    var limitMax = trigger[oppositeCssProp] + (trigger[oppositeSizeProp] - arrow[oppositeSizeProp]) - arrowOffsetBase;\n\n    if (!secondary.isPush) {\n      // if secondary is bottom or right -> add the width or height of the layer\n      limitMin += layer[oppositeSizeProp];\n      limitMax += layer[oppositeSizeProp];\n    }\n\n    if (secondary.isCenter) {\n      var propertyA = (isHorizontal ? BoundSide.top : BoundSide.left).prop;\n      var propertyB = (isHorizontal ? BoundSide.bottom : BoundSide.right).prop; // left = limit(\n      //   trigger.left + trigger.width / 2 - layer.width / 2 + secondaryOffset,\n      //   limitMin,\n      //   limitMax\n      // )\n\n      result[propertyA] = limit(trigger[propertyA] + trigger[oppositeSizeProp] / 2 - layer[oppositeSizeProp] / 2 + secondaryOffset, limitMin, limitMax); // right = left + layer.width\n\n      result[propertyB] = result[propertyA] + layer[oppositeSizeProp];\n    } else {\n      var sec = secondary;\n      var triggerValue = trigger[sec.prop]; // Under some conditions, when the layer is not able to align with the trigger\n      // due to arrow-size and arrow-offsets, we need to compensate.\n      // Otherwise, the secondary-offset will have no impact\n\n      var arrowCompensation = triggerValue < limitMin ? limitMin - triggerValue : triggerValue > limitMax ? limitMax - triggerValue : 0; // left = limit(\n      //   trigger.left + secondaryOffset + arrowCompensation,\n      //   limitMin,\n      //   limitMax\n      // )\n\n      result[sec.prop] = limit(triggerValue + secondaryOffset + arrowCompensation, limitMin, limitMax); // right = left + layer.width\n\n      result[sec.opposite.prop] = result[sec.prop] + secondary.factor(layer[oppositeSizeProp]);\n    } // set the correct dimensions\n\n\n    result.width = result.right - result.left;\n    result.height = result.bottom - result.top; // create new bounds object\n\n    var layerBounds = Bounds.create(result);\n\n    if (secondaryOffset === 0) {\n      this._cachedLayerBounds = layerBounds;\n    }\n\n    return layerBounds;\n  }\n  /**\r\n   * Checks whether the trigger is bigger on the opposite side\r\n   * ie. placement \"top-start\" -> has trigger a bigger width?\r\n   */\n  ;\n\n  /**\r\n   * returns getLayerBounds(), including container-offsets\r\n   */\n  _proto.getLayerCollisionBounds = function getLayerCollisionBounds() {\n    var container = this.offsets.container;\n    return this.getLayerBounds().mapSides(function (side, value) {\n      return value -= side.factor(container);\n    }).merge(function (_ref) {\n      var width = _ref.width,\n          height = _ref.height;\n      return {\n        width: width + container * 2,\n        height: height + container * 2\n      };\n    });\n  }\n  /**\r\n   * Returns a BoundsOffsets instance containing merged offsets to containers with the most\r\n   * negative scenario\r\n   */\n  ;\n\n  _proto.getContainerOffsets = function getContainerOffsets(layerBounds) {\n    if (this._cachedContainerOffsets && !layerBounds) {\n      return this._cachedContainerOffsets;\n    }\n\n    var subjectBounds = this.subjectsBounds.merge({\n      layer: layerBounds || this.getLayerCollisionBounds()\n    });\n    var offsets = BoundsOffsets.mergeSmallestSides(subjectBounds.layerOffsetsToScrollContainers);\n\n    if (!layerBounds) {\n      this._cachedContainerOffsets = offsets;\n    }\n\n    return offsets;\n  };\n\n  _createClass(Placement, [{\n    key: \"type\",\n    get: function get() {\n      return this.primary.prop + \"-\" + (this.secondary.prop === \"center\" ? \"center\" : [\"bottom\", \"right\"].includes(this.secondary.prop) ? \"end\" : \"start\");\n    }\n  }, {\n    key: \"triggerIsBigger\",\n    get: function get() {\n      var isHorizontal = this.secondary.isHorizontal;\n      var _this$subjectsBounds = this.subjectsBounds,\n          triggerHasBiggerWidth = _this$subjectsBounds.triggerHasBiggerWidth,\n          triggerHasBiggerHeight = _this$subjectsBounds.triggerHasBiggerHeight;\n      return isHorizontal && triggerHasBiggerWidth || !isHorizontal && triggerHasBiggerHeight;\n    }\n    /**\r\n     * Checks whether the placement fits within all it's container (including container-offset)\r\n     */\n\n  }, {\n    key: \"fitsContainer\",\n    get: function get() {\n      return this.getContainerOffsets().allSidesArePositive;\n    }\n    /**\r\n     * Returns the surface in square pixels of the visible part of the layer\r\n     */\n\n  }, {\n    key: \"visibleSurface\",\n    get: function get() {\n      var layerBounds = this.getLayerBounds();\n      var containerOffsets = this.getContainerOffsets(layerBounds);\n      var substract = containerOffsets.negativeSides;\n\n      for (var side in substract) {\n        // @ts-ignore\n        substract[side] = -substract[side]; // make positive for substraction;\n      }\n\n      return layerBounds.substract(substract).surface;\n    }\n    /**\r\n     * Returns a BoundSide by looking at the most negative offset that is the opposite direction\r\n     */\n\n  }, {\n    key: \"secondaryOffsetSide\",\n    get: function get() {\n      var _Object$entries$map$f,\n          _Object$entries$map$f2,\n          _this = this;\n\n      // Given placement 'top-start' and containerOffsets { left: -20, top: -10, right: -10, bottom: 200 }...\n      // the only negative offsets on the opposite side are { left: -20, right: -10 }\n      // since we have to return only 1 side, we pick the most negative, which is 'left'\n      var containerOffsets = this.getContainerOffsets();\n\n      var _ref2 = (_Object$entries$map$f = (_Object$entries$map$f2 = Object.entries(containerOffsets.negativeSides).map(function (_ref3) {\n        var side = _ref3[0],\n            value = _ref3[1];\n        return [BoundSide[side], value];\n      }).filter(function (_ref4) {\n        var side = _ref4[0];\n        return _this.primary.isOppositeDirection(side);\n      }).sort(function (_ref5, _ref6) {\n        var a = _ref5[1];\n        var b = _ref6[1];\n        return b - a;\n      })) == null ? void 0 : _Object$entries$map$f2[0]) != null ? _Object$entries$map$f : [],\n          mostNegativeSide = _ref2[0];\n\n      return mostNegativeSide || null;\n    }\n  }]);\n\n  return Placement;\n}();\nvar PlacementCenter = /*#__PURE__*/function (_Placement) {\n  _inheritsLoose(PlacementCenter, _Placement);\n\n  function PlacementCenter() {\n    return _Placement.apply(this, arguments) || this;\n  }\n\n  var _proto2 = PlacementCenter.prototype;\n\n  _proto2.getLayerBounds = function getLayerBounds() {\n    var _this$subjectsBounds2 = this.subjectsBounds,\n        trigger = _this$subjectsBounds2.trigger,\n        layer = _this$subjectsBounds2.layer;\n    var result = Bounds.empty();\n    result.top = trigger.top + trigger.height / 2 - layer.height / 2;\n    result.bottom = result.top + layer.height;\n    result.left = trigger.left + trigger.width / 2 - layer.width / 2;\n    result.right = result.left + layer.width;\n    result.width = result.right - result.left;\n    result.height = result.bottom - result.top;\n    return result;\n  };\n\n  return PlacementCenter;\n}(Placement);\n\nfunction getNegativeOffsetBetweenLayerCenterAndTrigger(subjectsBounds, placement, arrowOffset) {\n  var layer = subjectsBounds.layer,\n      trigger = subjectsBounds.trigger,\n      arrow = subjectsBounds.arrow;\n  var sizeProperty = placement.primary.oppositeSizeProp;\n\n  var _ref = !placement.primary.isHorizontal ? [\"left\", \"right\"] : [\"top\", \"bottom\"],\n      sideA = _ref[0],\n      sideB = _ref[1];\n\n  var offsetA = layer[sideA] + layer[sizeProperty] / 2 - trigger[sideA] - arrow[sizeProperty] / 2 - arrowOffset;\n  var offsetB = layer[sideB] - layer[sizeProperty] / 2 - trigger[sideB] + arrow[sizeProperty] / 2 + arrowOffset;\n  return (offsetA < 0 ? -offsetA : 0) + (offsetB > 0 ? -offsetB : 0);\n}\n\nvar STYLE_BASE = {\n  position: \"absolute\",\n  willChange: \"top, left\",\n  left: null,\n  right: null,\n  top: null,\n  bottom: null\n};\nfunction getArrowStyle(subjectsBounds, placement, arrowOffset) {\n  var _extends2;\n\n  if (placement.primary.isCenter) {\n    return STYLE_BASE;\n  }\n\n  var layer = subjectsBounds.layer,\n      trigger = subjectsBounds.trigger,\n      arrow = subjectsBounds.arrow;\n  var sizeProperty = placement.primary.oppositeSizeProp;\n  var triggerIsBigger = trigger[sizeProperty] > layer[sizeProperty];\n  var min = arrowOffset + arrow[sizeProperty] / 2;\n  var max = layer[sizeProperty] - arrow[sizeProperty] / 2 - arrowOffset;\n  var negativeOffset = getNegativeOffsetBetweenLayerCenterAndTrigger(subjectsBounds, placement, arrowOffset);\n  var primarySide = placement.primary.prop;\n  var secondarySide = placement.primary.oppositeCssProp;\n  var secondaryValue = triggerIsBigger ? layer[sizeProperty] / 2 + negativeOffset : trigger[secondarySide] + trigger[sizeProperty] / 2 - layer[secondarySide];\n  return _extends({}, STYLE_BASE, (_extends2 = {}, _extends2[primarySide] = \"100%\", _extends2[secondarySide] = limit(secondaryValue, min, max), _extends2));\n}\n\n/**\r\n * Class mostly concerned about calculating and finding the right placement\r\n */\n\nvar Placements = /*#__PURE__*/function () {\n  function Placements(placements, config, subjectsBounds) {\n    this.placements = void 0;\n    this.config = void 0;\n    this.subjectsBounds = void 0;\n    this.placements = placements;\n    this.config = config;\n    this.subjectsBounds = subjectsBounds;\n  }\n  /**\r\n   * Converts a placement-type into a primary-side and a secondary-side\r\n   */\n\n\n  Placements.getSidesFromPlacementType = function getSidesFromPlacementType(type) {\n    var _type$split = type.split(\"-\"),\n        a = _type$split[0],\n        b = _type$split[1];\n\n    var primary = BoundSide[a];\n    var secondary;\n\n    if (b === \"center\") {\n      secondary = Side.center;\n    } else if (primary.isHorizontal) {\n      secondary = b === \"start\" ? Side.top : Side.bottom;\n    } else {\n      secondary = b === \"start\" ? Side.left : Side.right;\n    }\n\n    return [primary, secondary];\n  }\n  /**\r\n   * Main static method to create a Placements instance\r\n   * @param subjectsBounds instance of the SubjectsBounds class\r\n   * @param config config provided by the user\r\n   */\n  ;\n\n  Placements.create = function create(subjectsBounds, config) {\n    // create offsets-object from user config\n    var offsets = {\n      arrow: config.arrowOffset,\n      container: config.containerOffset,\n      trigger: config.triggerOffset\n    }; // function which creates a prioritized list of possible placments\n    // by looking at user-config\n\n    function getListOfPlacements(preferedPlacement) {\n      if (preferedPlacement === void 0) {\n        preferedPlacement = config.placement;\n      }\n\n      var _Placements$getSidesF = Placements.getSidesFromPlacementType(preferedPlacement),\n          primary = _Placements$getSidesF[0],\n          secondary = _Placements$getSidesF[1];\n\n      var preferredSide = BoundSide[primary.isHorizontal ? config.preferY : config.preferX]; // some priorities may alter when the trigger is bigger\n\n      var triggerIsBigger = !primary.isHorizontal && subjectsBounds.triggerHasBiggerWidth || primary.isHorizontal && subjectsBounds.triggerHasBiggerHeight; // utility function which constructs a placement by primary and secondary sides\n\n      function placementFrom(primary, secondary) {\n        return new Placement(primary, secondary, subjectsBounds, config.layerDimensions, offsets);\n      } // creating the list\n\n\n      var list = [];\n      list[0] = placementFrom(primary, secondary);\n      list[1] = placementFrom(primary, secondary.isCenter ? preferredSide : Side.center);\n      list[2] = placementFrom(primary, Side[(secondary.opposite.isCenter ? preferredSide.opposite : secondary.opposite).prop]);\n      list[3] = placementFrom(preferredSide, triggerIsBigger ? primary : Side[primary.opposite.prop]);\n      list[4] = placementFrom(preferredSide, Side.center);\n      list[5] = placementFrom(preferredSide, triggerIsBigger ? Side[primary.opposite.prop] : primary);\n      list[6] = placementFrom(BoundSide[preferredSide.opposite.prop], triggerIsBigger ? primary : Side[primary.opposite.prop]);\n      list[7] = placementFrom(BoundSide[preferredSide.opposite.prop], Side.center);\n      list[8] = placementFrom(BoundSide[preferredSide.opposite.prop], triggerIsBigger ? Side[primary.opposite.prop] : primary);\n      list[9] = placementFrom(BoundSide[primary.opposite.prop], secondary);\n      list[10] = placementFrom(BoundSide[primary.opposite.prop], secondary.isCenter ? preferredSide : Side.center);\n      list[11] = placementFrom(BoundSide[primary.opposite.prop], Side[(secondary.opposite.isCenter ? preferredSide.opposite : secondary.opposite).prop]); // only include placements that are part of 'possible-placements'\n\n      list = list.filter(function (placement) {\n        return placement.type === config.placement || config.possiblePlacements.includes(placement.type);\n      });\n      return list;\n    } // treat placement 'center' a little bit different\n\n\n    if (config.placement === \"center\") {\n      return new Placements([new PlacementCenter(Side.center, Side.center, subjectsBounds, config.layerDimensions, offsets)].concat(getListOfPlacements(config.preferY + \"-\" + config.preferX)), config, subjectsBounds);\n    }\n\n    return new Placements(getListOfPlacements(), config, subjectsBounds);\n  };\n\n  var _proto = Placements.prototype;\n\n  _proto.filterPlacementsBySide = function filterPlacementsBySide(side) {\n    return this.placements.filter(function (placement) {\n      return placement.primary === side;\n    });\n  };\n\n  _proto.findFirstPlacementThatFits = function findFirstPlacementThatFits() {\n    return this.placements.find(function (placement) {\n      return placement.fitsContainer;\n    });\n  };\n\n  _proto.placementWithBiggestVisibleSurface = function placementWithBiggestVisibleSurface() {\n    var _this$placements$map$ = this.placements.map(function (placement) {\n      return {\n        placement: placement,\n        surface: placement.visibleSurface\n      };\n    }) // sort -> biggest surface first\n    . // sort -> biggest surface first\n    sort(function (a, b) {\n      return b.surface - a.surface;\n    }),\n        placementWithBiggestSurface = _this$placements$map$[0].placement;\n\n    return placementWithBiggestSurface;\n  };\n\n  _proto.findSuitablePlacement = function findSuitablePlacement() {\n    if (!this.config.auto) {\n      return this.placements[0];\n    }\n\n    return this.findFirstPlacementThatFits() || this.placementWithBiggestVisibleSurface();\n  }\n  /**\r\n   * secondary offset: the number of pixels between the edge of the\r\n   * scroll-container and the current placement, on the side of the layer\r\n   * that didn't fit.\r\n   * Eventually this secondary offset gets added / subtracted from the\r\n   * placement that does fit in order to move the layer closer to the\r\n   * position of the placement that just would not fit.\r\n   * This creates the effect that the layer is moving gradually from one\r\n   * placement to the next as the users scrolls the page or scroll-container\r\n   */\n  ;\n\n  _proto.getSecondaryOffset = function getSecondaryOffset(placement) {\n    var _this$config = this.config,\n        auto = _this$config.auto,\n        snap = _this$config.snap; // return early when we're not interested...\n\n    if (!auto || snap || placement instanceof PlacementCenter) {\n      return 0;\n    } // if current placement fits and is prefered placement...\n    // return early\n\n\n    var placementsOnSameSide = this.filterPlacementsBySide(placement.primary);\n    var currentPlacementHasHighestPriority = placementsOnSameSide.indexOf(placement) === 0;\n\n    if (currentPlacementHasHighestPriority && placement.fitsContainer) {\n      return 0;\n    }\n\n    var firstPlacementThatDoesNotFit = placementsOnSameSide.find(function (placement) {\n      return !placement.fitsContainer;\n    });\n\n    if (!firstPlacementThatDoesNotFit) {\n      return 0;\n    }\n\n    var secondaryOffsetSide = firstPlacementThatDoesNotFit.secondaryOffsetSide;\n\n    if (!secondaryOffsetSide) {\n      return 0;\n    }\n\n    var containerOffsets = placement.getContainerOffsets(); // determine whether we should add or substract the secondary-offset\n\n    var secondary = placement.secondary;\n    var factor;\n\n    if (placement.triggerIsBigger || firstPlacementThatDoesNotFit === placement) {\n      factor = secondaryOffsetSide.isPush ? -1 : 1;\n    } else {\n      factor = secondary === Side.left || [Side.top, Side.center].includes(secondary) && secondaryOffsetSide.isPush ? -1 : 1;\n    } // get number of pixels between placement that did not fit and current\n    // placement\n\n\n    var secondaryOffset = containerOffsets[secondaryOffsetSide.prop];\n    return secondaryOffset * factor;\n  };\n\n  _proto.getStyles = function getStyles(layerBounds, placement, scrollOffsets, borderOffsets) {\n    var layerStyleBase = {\n      willChange: \"top, left, width, height\"\n    };\n    var arrow = getArrowStyle(this.subjectsBounds.merge({\n      layer: layerBounds\n    }), placement, this.config.arrowOffset);\n    var layer = this.config.overflowContainer ? _extends({}, layerStyleBase, {\n      position: \"fixed\",\n      top: layerBounds.top,\n      left: layerBounds.left\n    }) : _extends({}, layerStyleBase, {\n      position: \"absolute\",\n      top: layerBounds.top - this.subjectsBounds.parent.top + scrollOffsets.top - borderOffsets.top,\n      left: layerBounds.left - this.subjectsBounds.parent.left + scrollOffsets.left - borderOffsets.left\n    });\n    return {\n      arrow: arrow,\n      layer: layer\n    };\n  };\n\n  _proto.getHasDisappeared = function getHasDisappeared(layerBounds) {\n    var subject = this.config.overflowContainer ? this.subjectsBounds.trigger : layerBounds;\n    var containerOffsets = BoundsOffsets.mergeSmallestSides(this.subjectsBounds.offsetsToScrollContainers(subject, true));\n    var entries = Object.entries(containerOffsets.negativeSides);\n    var hasFullyDisappeared = entries.some(function (_ref) {\n      var prop = _ref[0],\n          value = _ref[1];\n      var side = BoundSide[prop];\n      return value <= -subject[side.sizeProp];\n    });\n\n    if (hasFullyDisappeared) {\n      return \"full\";\n    }\n\n    if (!containerOffsets.allSidesArePositive) {\n      return \"partial\";\n    }\n\n    return null;\n  };\n\n  _proto.result = function result(scrollOffsets, borderOffsets) {\n    var suitablePlacement = this.findSuitablePlacement();\n    var secondaryOffset = this.getSecondaryOffset(suitablePlacement);\n    var layerBounds = suitablePlacement.getLayerBounds(secondaryOffset);\n    var styles = this.getStyles(layerBounds, suitablePlacement, scrollOffsets, borderOffsets);\n    var layerSide = suitablePlacement.primary.prop;\n    return {\n      styles: styles,\n      layerSide: layerSide,\n      placement: suitablePlacement,\n      layerBounds: layerBounds,\n      hasDisappeared: this.getHasDisappeared(layerBounds)\n    };\n  };\n\n  return Placements;\n}();\n\nvar SubjectsBounds = /*#__PURE__*/function () {\n  function SubjectsBounds(subjectsBounds, overflowContainer) {\n    this.overflowContainer = void 0;\n    this.trigger = void 0;\n    this.layer = void 0;\n    this.arrow = void 0;\n    this.parent = void 0;\n    this.window = void 0;\n    this.scrollContainers = void 0;\n    this.overflowContainer = overflowContainer;\n    Object.assign(this, subjectsBounds);\n  }\n\n  SubjectsBounds.create = function create(environment, layer, trigger, parent, arrow, scrollContainers, overflowContainer, getTriggerBounds) {\n    var window = Bounds.fromWindow(environment);\n    return new SubjectsBounds({\n      layer: Bounds.fromElement(layer, {\n        environment: environment,\n        withTransform: false\n      }),\n      trigger: getTriggerBounds ? Bounds.create(boundsToObject(getTriggerBounds())) : Bounds.fromElement(trigger),\n      arrow: arrow ? Bounds.fromElement(arrow) : Bounds.empty(),\n      parent: parent ? Bounds.fromElement(parent) : window,\n      window: window,\n      scrollContainers: [window].concat(scrollContainers.map(function (container) {\n        return Bounds.fromElement(container, {\n          withScrollbars: false\n        });\n      }))\n    }, overflowContainer);\n  };\n\n  var _proto = SubjectsBounds.prototype;\n\n  _proto.merge = function merge(subjectsBounds) {\n    return new SubjectsBounds(_extends({}, this, subjectsBounds), this.overflowContainer);\n  };\n\n  _proto.offsetsToScrollContainers = function offsetsToScrollContainers(subject, allContainers) {\n    if (allContainers === void 0) {\n      allContainers = false;\n    }\n\n    var scrollContainers = this.overflowContainer && !allContainers ? [this.window] : this.scrollContainers;\n    return scrollContainers.map(function (scrollContainer) {\n      return scrollContainer.offsetsTo(subject);\n    });\n  };\n\n  _createClass(SubjectsBounds, [{\n    key: \"layerOffsetsToScrollContainers\",\n    get: function get() {\n      return this.offsetsToScrollContainers(this.layer);\n    }\n  }, {\n    key: \"triggerHasBiggerWidth\",\n    get: function get() {\n      return this.trigger.width > this.layer.width;\n    }\n  }, {\n    key: \"triggerHasBiggerHeight\",\n    get: function get() {\n      return this.trigger.height > this.layer.height;\n    }\n  }]);\n\n  return SubjectsBounds;\n}();\n\nvar GLOBAL_CONTAINER = null;\nfunction setGlobalContainer(container) {\n  if (typeof document === \"undefined\") {\n    return;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(!(GLOBAL_CONTAINER instanceof HTMLElement), \"react-laag: You've called 'setGlobalContainer() previously'. It is recommended to only set the global container once, otherwise this may lead to unexpected behaviour.\") : void 0;\n\n  if (typeof container === \"function\") {\n    GLOBAL_CONTAINER = container();\n  } else if (typeof container === \"string\") {\n    GLOBAL_CONTAINER = document.getElementById(container);\n  } else {\n    GLOBAL_CONTAINER = container;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(GLOBAL_CONTAINER instanceof HTMLElement, \"react-laag: You've called 'setGlobalContainer()', but it didn't result in a valid html-element\") : void 0;\n}\nvar DEFAULT_OPTIONS = {\n  auto: false,\n  arrowOffset: 0,\n  containerOffset: 10,\n  triggerOffset: 0,\n  overflowContainer: true,\n  placement: \"top-center\",\n  possiblePlacements: PLACEMENT_TYPES,\n  preferX: \"right\",\n  preferY: \"bottom\",\n  snap: false,\n  container: undefined,\n  trigger: undefined\n};\nfunction useLayer(_ref) {\n  var _triggerBoundsRef$cur;\n\n  var _ref$isOpen = _ref.isOpen,\n      isOpen = _ref$isOpen === void 0 ? false : _ref$isOpen,\n      _ref$overflowContaine = _ref.overflowContainer,\n      overflowContainer = _ref$overflowContaine === void 0 ? DEFAULT_OPTIONS.overflowContainer : _ref$overflowContaine,\n      _ref$environment = _ref.environment,\n      environment = _ref$environment === void 0 ? typeof window !== \"undefined\" ? window : undefined : _ref$environment,\n      ResizeObserverPolyfill = _ref.ResizeObserver,\n      _ref$placement = _ref.placement,\n      placement = _ref$placement === void 0 ? DEFAULT_OPTIONS.placement : _ref$placement,\n      _ref$possiblePlacemen = _ref.possiblePlacements,\n      possiblePlacements = _ref$possiblePlacemen === void 0 ? DEFAULT_OPTIONS.possiblePlacements : _ref$possiblePlacemen,\n      _ref$preferX = _ref.preferX,\n      preferX = _ref$preferX === void 0 ? DEFAULT_OPTIONS.preferX : _ref$preferX,\n      _ref$preferY = _ref.preferY,\n      preferY = _ref$preferY === void 0 ? DEFAULT_OPTIONS.preferY : _ref$preferY,\n      _ref$auto = _ref.auto,\n      auto = _ref$auto === void 0 ? DEFAULT_OPTIONS.auto : _ref$auto,\n      _ref$snap = _ref.snap,\n      snap = _ref$snap === void 0 ? DEFAULT_OPTIONS.snap : _ref$snap,\n      _ref$triggerOffset = _ref.triggerOffset,\n      triggerOffset = _ref$triggerOffset === void 0 ? DEFAULT_OPTIONS.triggerOffset : _ref$triggerOffset,\n      _ref$containerOffset = _ref.containerOffset,\n      containerOffset = _ref$containerOffset === void 0 ? DEFAULT_OPTIONS.containerOffset : _ref$containerOffset,\n      _ref$arrowOffset = _ref.arrowOffset,\n      arrowOffset = _ref$arrowOffset === void 0 ? DEFAULT_OPTIONS.arrowOffset : _ref$arrowOffset,\n      _ref$container = _ref.container,\n      container = _ref$container === void 0 ? DEFAULT_OPTIONS.container : _ref$container,\n      _ref$layerDimensions = _ref.layerDimensions,\n      layerDimensions = _ref$layerDimensions === void 0 ? null : _ref$layerDimensions,\n      onDisappear = _ref.onDisappear,\n      onOutsideClick = _ref.onOutsideClick,\n      onParentClose = _ref.onParentClose,\n      triggerOption = _ref.trigger;\n\n  // initialize styles\n  var _useState = useState(function () {\n    return {\n      layerSide: placement === \"center\" ? \"center\" : Placements.getSidesFromPlacementType(placement)[0].prop,\n      styles: {\n        layer: {\n          position: overflowContainer ? \"fixed\" : \"absolute\",\n          top: 0,\n          left: 0\n        },\n        arrow: {\n          position: \"absolute\",\n          top: 0,\n          left: 0\n        }\n      }\n    };\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var triggerBoundsRef = useRef(null); // tracks state in order for us to use read inside functions that require dependencies,\n  // like `useCallback`, without triggering an update\n\n  var lastState = useLastState(state, isOpen); // track invalidations for scheduled position updates\n\n  var repositioningToken = useRef({\n    cancelled: false\n  });\n  useEffect(function () {\n    return function () {\n      // when this hook unmounts, make sure to cancel any scheduled position updates\n      repositioningToken.current.cancelled = true;\n    };\n  }, []); // Most important function regarding positioning\n  // It receives boundaries collected by `useTrackElements`, does some calculations,\n  // sets new styles, and handles when a layer has disappeared.\n\n  var handlePositioning = useCallback(function handlePositioning(_ref2, scrollOffsets, borderOffsets) {\n    var arrow = _ref2.arrow,\n        layer = _ref2.layer,\n        scrollContainers = _ref2.scrollContainers,\n        trigger = _ref2.trigger;\n    var parent = scrollContainers[0];\n    var subjectsBounds = SubjectsBounds.create(environment, layer, trigger, parent, arrow, scrollContainers, overflowContainer, triggerOption == null ? void 0 : triggerOption.getBounds);\n    var config = {\n      placement: placement,\n      possiblePlacements: possiblePlacements,\n      auto: auto,\n      layerDimensions: layerDimensions,\n      arrowOffset: arrowOffset,\n      containerOffset: containerOffset,\n      triggerOffset: triggerOffset,\n      preferX: preferX,\n      preferY: preferY,\n      snap: snap,\n      overflowContainer: overflowContainer\n    };\n\n    var _Placements$create$re = Placements.create(subjectsBounds, config).result(scrollOffsets, borderOffsets),\n        hasDisappeared = _Placements$create$re.hasDisappeared,\n        layerSide = _Placements$create$re.layerSide,\n        styles = _Placements$create$re.styles;\n\n    var newState = {\n      layerSide: layerSide,\n      styles: styles\n    };\n\n    if (!lastState.current || didStateChange(lastState.current, newState)) {\n      lastState.current = newState; // optimistically update lastState to prevent infinite loop\n\n      /**\r\n       * Throttle state updates slightly by delaying them using an immediately\r\n       * resolved promise, only applying them if there is no later update.\r\n       * This helps for multiple updates that happens synchronously one after another.\r\n       */\n\n      repositioningToken.current.cancelled = true;\n      var token = {\n        cancelled: false\n      };\n      repositioningToken.current = token;\n      Promise.resolve().then(function () {\n        if (!token.cancelled) {\n          setState(newState);\n        }\n      });\n    }\n\n    if (isSet(hasDisappeared) && isSet(onDisappear)) {\n      onDisappear(hasDisappeared);\n    }\n  }, [arrowOffset, auto, containerOffset, environment, layerDimensions, onDisappear, overflowContainer, placement, possiblePlacements, preferX, preferY, snap, triggerOffset, lastState, triggerOption]);\n\n  var _useTrackElements = useTrackElements({\n    ResizeObserverPolyfill: ResizeObserverPolyfill,\n    environment: environment,\n    enabled: isOpen,\n    overflowContainer: overflowContainer,\n    onChange: handlePositioning,\n    triggerOption: triggerOption\n  }),\n      triggerRef = _useTrackElements.triggerRef,\n      layerRef = _useTrackElements.layerRef,\n      arrowRef = _useTrackElements.arrowRef,\n      closestScrollContainer = _useTrackElements.closestScrollContainer;\n\n  var _useGroup = useGroup({\n    isOpen: isOpen,\n    onOutsideClick: onOutsideClick,\n    onParentClose: onParentClose\n  }),\n      closeOnOutsideClickRefs = _useGroup.closeOnOutsideClickRefs,\n      registrations = _useGroup.registrations;\n\n  var props = {\n    triggerProps: Boolean(triggerOption) ? {} // when using the `trigger` option, make `triggerProps` useless\n    : {\n      ref: mergeRefs(triggerRef, closeOnOutsideClickRefs.trigger, triggerBoundsRef)\n    },\n    layerProps: {\n      ref: mergeRefs(layerRef, closeOnOutsideClickRefs.layer),\n      style: state.styles.layer\n    },\n    arrowProps: {\n      ref: arrowRef,\n      style: state.styles.arrow,\n      layerSide: state.layerSide\n    },\n    layerSide: state.layerSide,\n    triggerBounds: isOpen ? triggerOption ? triggerOption.getBounds() : (_triggerBoundsRef$cur = triggerBoundsRef.current) == null ? void 0 : _triggerBoundsRef$cur.getBoundingClientRect() : null,\n    renderLayer: function renderLayer(children) {\n      return typeof document !== \"undefined\" ? createPortal(createElement(GroupProvider, {\n        registrations: registrations,\n        children: children\n      }), overflowContainer || !closestScrollContainer ? getContainerElement(container) : closestScrollContainer) : null;\n    }\n  };\n  return props;\n}\n\nfunction didStateChange(previous, next) {\n  if (previous.layerSide !== next.layerSide) {\n    return true;\n  }\n\n  var styleProps = [\"position\", \"top\", \"left\", \"right\", \"bottom\"];\n\n  for (var _i = 0, _styleProps = styleProps; _i < _styleProps.length; _i++) {\n    var prop = _styleProps[_i];\n\n    if (previous.styles.layer[prop] !== next.styles.layer[prop] || previous.styles.arrow[prop] !== next.styles.arrow[prop]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar DEFAULT_CONTAINER_ID = \"layers\";\n\nfunction getContainerElement(container) {\n  var element;\n\n  if (typeof container === \"function\") {\n    element = container();\n\n    if (!element || !(element instanceof HTMLElement)) {\n      throw new Error(\"react-laag: You've passed a function to the 'container' prop, but it returned no valid HTMLElement\");\n    }\n  } else if (container instanceof HTMLElement) {\n    element = container;\n  } else if (typeof container === \"string\") {\n    element = document.getElementById(container);\n\n    if (!element) {\n      throw new Error(\"react-laag: You've passed element with id '\" + container + \"' to the 'container' prop, but it returned no valid HTMLElement\");\n    }\n  } else if (GLOBAL_CONTAINER instanceof HTMLElement) {\n    return GLOBAL_CONTAINER;\n  } else {\n    element = document.getElementById(DEFAULT_CONTAINER_ID);\n\n    if (!element) {\n      element = document.createElement(\"div\");\n      element.id = DEFAULT_CONTAINER_ID;\n      element.style.cssText = \"\\n        position: absolute;\\n        top: 0px;\\n        left: 0px;\\n        right: 0px;\\n      \";\n      document.body.appendChild(element);\n    }\n  }\n\n  return element;\n}\n\nvar _excluded = [\"size\", \"angle\", \"borderWidth\", \"borderColor\", \"roundness\", \"backgroundColor\", \"layerSide\", \"style\"];\nvar LEFT = \"left\";\nvar TOP = \"top\";\nvar BOTTOM = \"bottom\";\nvar RIGHT = \"right\";\n\nfunction getWidthBasedOnAngle(angle, size) {\n  return Math.tan(angle * (Math.PI / 180)) * size;\n}\n\nfunction getViewBox(sizeA, sizeB, side, borderWidth) {\n  var _map;\n\n  var map = (_map = {}, _map[BOTTOM] = \"0 \" + -borderWidth + \" \" + sizeB + \" \" + sizeA, _map[TOP] = \"0 0 \" + sizeB + \" \" + (sizeA + borderWidth), _map[RIGHT] = -borderWidth + \" 0 \" + sizeA + \" \" + sizeB, _map[LEFT] = \"0 0 \" + (sizeA + borderWidth) + \" \" + sizeB, _map);\n  return map[side.prop];\n}\n\nfunction getTrianglePath(sizeA, sizeB, side, roundness, angle) {\n  var _BOTTOM$TOP$RIGHT$LEF, _BOTTOM$TOP$RIGHT$LEF2, _BOTTOM$TOP$RIGHT$LEF3;\n\n  var relativeRoundness = roundness / 10 * sizeA * 2;\n  var A = (_BOTTOM$TOP$RIGHT$LEF = {}, _BOTTOM$TOP$RIGHT$LEF[BOTTOM] = [0, sizeA], _BOTTOM$TOP$RIGHT$LEF[TOP] = [0, 0], _BOTTOM$TOP$RIGHT$LEF[RIGHT] = [sizeA, sizeB], _BOTTOM$TOP$RIGHT$LEF[LEFT] = [0, sizeB], _BOTTOM$TOP$RIGHT$LEF)[side.prop].join(\" \");\n  var B = side.isHorizontal ? \"V 0\" : \"H \" + sizeB;\n  var cPoint = sizeB / 2;\n  var c1A = sizeB / 2 + getWidthBasedOnAngle(angle, sizeA / 8);\n  var c1B = sizeA / 8;\n  var C = (_BOTTOM$TOP$RIGHT$LEF2 = {}, _BOTTOM$TOP$RIGHT$LEF2[BOTTOM] = [\"C\", c1A, c1B, cPoint + relativeRoundness, 0, cPoint, 0], _BOTTOM$TOP$RIGHT$LEF2[TOP] = [\"C\", c1A, sizeA - c1B, cPoint + relativeRoundness, sizeA, cPoint, sizeA], _BOTTOM$TOP$RIGHT$LEF2[RIGHT] = [\"C\", c1B, sizeB - c1A, 0, cPoint - relativeRoundness, 0, cPoint], _BOTTOM$TOP$RIGHT$LEF2[LEFT] = [\"C\", sizeA - c1B, sizeB - c1A, sizeA, cPoint - relativeRoundness, sizeA, cPoint], _BOTTOM$TOP$RIGHT$LEF2)[side.prop].join(\" \");\n  var d1A = sizeB / 2 - getWidthBasedOnAngle(angle, sizeA / 8);\n  var d1B = sizeA / 8;\n  var D = (_BOTTOM$TOP$RIGHT$LEF3 = {}, _BOTTOM$TOP$RIGHT$LEF3[BOTTOM] = [\"C\", cPoint - relativeRoundness, 0, d1A, d1B, A], _BOTTOM$TOP$RIGHT$LEF3[TOP] = [\"C\", cPoint - relativeRoundness, sizeA, d1A, sizeA - d1B, A], _BOTTOM$TOP$RIGHT$LEF3[RIGHT] = [\"C\", 0, cPoint + relativeRoundness, d1B, sizeB - d1A, A], _BOTTOM$TOP$RIGHT$LEF3[LEFT] = [\"C\", sizeA, cPoint + relativeRoundness, sizeA - d1B, sizeB - d1A, A], _BOTTOM$TOP$RIGHT$LEF3)[side.prop].join(\" \");\n  return [\"M\", A, B, C, D].join(\" \");\n}\n\nfunction getBorderMaskPath(sizeA, sizeB, borderWidth, side, angle) {\n  var borderOffset = getWidthBasedOnAngle(angle, borderWidth);\n\n  var _ref = !side.isPush ? [sizeA, sizeA - borderWidth] : [0, borderWidth],\n      A = _ref[0],\n      B = _ref[1];\n\n  if (side.isHorizontal) {\n    return [\"M\", A, borderWidth, \"V\", sizeB - borderWidth, \"L\", B, sizeB - borderWidth - borderOffset, \"V\", borderOffset + borderWidth, \"Z\"].join(\" \");\n  }\n\n  return [\"M\", borderWidth, A, \"H\", sizeB - borderWidth, \"L\", sizeB - borderWidth - borderOffset, B, \"H\", borderOffset + borderWidth, \"Z\"].join(\" \");\n}\n\nvar Arrow = /*#__PURE__*/forwardRef(function Arrow(_ref2, ref) {\n  var _ref2$size = _ref2.size,\n      size = _ref2$size === void 0 ? 8 : _ref2$size,\n      _ref2$angle = _ref2.angle,\n      angle = _ref2$angle === void 0 ? 45 : _ref2$angle,\n      _ref2$borderWidth = _ref2.borderWidth,\n      borderWidth = _ref2$borderWidth === void 0 ? 0 : _ref2$borderWidth,\n      _ref2$borderColor = _ref2.borderColor,\n      borderColor = _ref2$borderColor === void 0 ? \"black\" : _ref2$borderColor,\n      _ref2$roundness = _ref2.roundness,\n      roundness = _ref2$roundness === void 0 ? 0 : _ref2$roundness,\n      _ref2$backgroundColor = _ref2.backgroundColor,\n      backgroundColor = _ref2$backgroundColor === void 0 ? \"white\" : _ref2$backgroundColor,\n      _ref2$layerSide = _ref2.layerSide,\n      layerSide = _ref2$layerSide === void 0 ? \"top\" : _ref2$layerSide,\n      _ref2$style = _ref2.style,\n      style = _ref2$style === void 0 ? {} : _ref2$style,\n      rest = _objectWithoutPropertiesLoose(_ref2, _excluded);\n\n  if (layerSide === \"center\") {\n    return null;\n  }\n\n  var side = BoundSide[layerSide];\n  var sizeA = size;\n  var sizeB = getWidthBasedOnAngle(angle, size) * 2;\n  var maxSize = Math.max(sizeA, sizeB);\n  return createElement(\"svg\", _extends({\n    ref: ref\n  }, rest, {\n    style: _extends({}, style, {\n      transform: \"translate\" + (side.isHorizontal ? \"Y\" : \"X\") + \"(-50%)\"\n    }),\n    width: maxSize,\n    height: maxSize,\n    preserveAspectRatio: side.isPush ? \"xMinYMin\" : \"xMaxYMax\",\n    viewBox: getViewBox(sizeA, sizeB, side, borderWidth)\n  }), createElement(\"path\", {\n    fill: backgroundColor,\n    strokeWidth: borderWidth,\n    stroke: borderColor,\n    d: getTrianglePath(sizeA, sizeB, side, roundness, angle)\n  }), createElement(\"path\", {\n    fill: backgroundColor,\n    d: getBorderMaskPath(sizeA, sizeB, borderWidth, side, angle)\n  }));\n});\n\nvar Status;\n\n(function (Status) {\n  Status[Status[\"ENTERING\"] = 0] = \"ENTERING\";\n  Status[Status[\"LEAVING\"] = 1] = \"LEAVING\";\n  Status[Status[\"IDLE\"] = 2] = \"IDLE\";\n})(Status || (Status = {}));\n\nfunction useHover(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$delayEnter = _ref.delayEnter,\n      delayEnter = _ref$delayEnter === void 0 ? 0 : _ref$delayEnter,\n      _ref$delayLeave = _ref.delayLeave,\n      delayLeave = _ref$delayLeave === void 0 ? 0 : _ref$delayLeave,\n      _ref$hideOnScroll = _ref.hideOnScroll,\n      hideOnScroll = _ref$hideOnScroll === void 0 ? true : _ref$hideOnScroll;\n\n  var _useState = useState(false),\n      show = _useState[0],\n      setShow = _useState[1];\n\n  var timeout = useRef(null);\n  var status = useRef(Status.IDLE);\n  var hasTouchMoved = useRef(false);\n  var removeTimeout = useCallback(function removeTimeout() {\n    clearTimeout(timeout.current);\n    timeout.current = null;\n    status.current = Status.IDLE;\n  }, []);\n\n  function onMouseEnter() {\n    // if was leaving, stop leaving\n    if (status.current === Status.LEAVING && timeout.current) {\n      removeTimeout();\n    }\n\n    if (show) {\n      return;\n    }\n\n    status.current = Status.ENTERING;\n    timeout.current = window.setTimeout(function () {\n      setShow(true);\n      timeout.current = null;\n      status.current = Status.IDLE;\n    }, delayEnter);\n  }\n\n  function onMouseLeave(_, immediate) {\n    // if was waiting for entering,\n    // clear timeout\n    if (status.current === Status.ENTERING && timeout.current) {\n      removeTimeout();\n    }\n\n    if (!show) {\n      return;\n    }\n\n    if (immediate) {\n      setShow(false);\n      timeout.current = null;\n      status.current = Status.IDLE;\n      return;\n    }\n\n    status.current = Status.LEAVING;\n    timeout.current = window.setTimeout(function () {\n      setShow(false);\n      timeout.current = null;\n      status.current = Status.IDLE;\n    }, delayLeave);\n  } // make sure to clear timeout on unmount\n\n\n  useEffect(function () {\n    function onScroll() {\n      if (show && hideOnScroll) {\n        removeTimeout();\n        setShow(false);\n      }\n    }\n\n    window.addEventListener(\"scroll\", onScroll, true);\n    return function () {\n      window.removeEventListener(\"scroll\", onScroll, true);\n\n      if (timeout.current) {\n        clearTimeout(timeout.current);\n      }\n    };\n  }, [show, hideOnScroll, removeTimeout]);\n  var hoverProps = {\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onTouchStart: function onTouchStart() {\n      hasTouchMoved.current = false;\n    },\n    onTouchMove: function onTouchMove() {\n      hasTouchMoved.current = true;\n    },\n    onTouchEnd: function onTouchEnd() {\n      if (!hasTouchMoved.current && !show) {\n        setShow(true);\n      }\n\n      hasTouchMoved.current = false;\n    }\n  };\n  return [show, hoverProps, function () {\n    return onMouseLeave(null, true);\n  }];\n}\n\n/**\r\n * @deprecated\r\n * Note: this component is marked as deprecated and will be removed and a possible\r\n * future release\r\n */\n\nfunction Transition(_ref) {\n  var isOpenExternal = _ref.isOpen,\n      children = _ref.children;\n\n  var _useState = useState({\n    isOpenInternal: isOpenExternal,\n    isLeaving: false\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var didMount = useRef(false);\n  useEffect(function () {\n    if (isOpenExternal) {\n      setState({\n        isOpenInternal: true,\n        isLeaving: false\n      });\n    } else if (didMount.current) {\n      setState({\n        isOpenInternal: false,\n        isLeaving: true\n      });\n    }\n  }, [isOpenExternal, setState]);\n  useEffect(function () {\n    process.env.NODE_ENV !== \"production\" ? warning(children, \"react-laag: You are using 'Transition'. Note that this component is marked as deprecated and will be removed at future releases\") : void 0;\n  }, [children]);\n  useEffect(function () {\n    didMount.current = true;\n  }, []);\n\n  if (!isOpenExternal && !state.isOpenInternal && !state.isLeaving) {\n    return null;\n  }\n\n  return children(state.isOpenInternal, function () {\n    if (!state.isOpenInternal) {\n      setState(function (s) {\n        return _extends({}, s, {\n          isLeaving: false\n        });\n      });\n    }\n  }, state.isLeaving);\n}\n\nexport { Arrow, DEFAULT_OPTIONS, PLACEMENT_TYPES, Transition, mergeRefs, setGlobalContainer, useHover, useLayer, useMousePositionAsTrigger };\n//# sourceMappingURL=react-laag.esm.js.map\n","import React, { cloneElement, Fragment, ReactNode, useCallback, useMemo, useRef, useState } from 'react';\nimport { useLayer, useHover, Arrow, mergeRefs } from 'react-laag';\nimport { isElement } from 'react-is';\nimport type { Options } from 'react-laag/dist/types';\nimport { UseHoverOptions } from 'react-laag/dist/useHover';\n\nimport { TStyle, useClassnames } from '../../hooks/use-classnames';\n\nimport style from './index.module.pcss';\n\nexport interface IProps {\n    /**\n     * Задает дополнительные CSS классы для стилизации компонента.\n     **/\n    className?: TStyle | string,\n    /**\n     * Принимает элементы, которые будут использованы в качестве триггера.\n     **/\n    children?: ReactNode,\n    /**\n     * Событие, при котором будет открываться `Popover`.\n     **/\n    trigger?: 'click' | 'hover',\n    /**\n     * Определяет, будет ли `Popover` отображаться при первоначальном рендеринге компонента.\n     **/\n    defaultIsOpen?: boolean,\n    overflowContainer?: boolean,\n    /**\n     * Определяет, должен ли автоматически подстраиваться под размеры экрана.\n     **/\n    auto?: boolean,\n    /**\n     * Определяет местоположение, куда будет отображаться всплывающий блок.\n     **/\n    placement?: Options['placement'],\n    /**\n     * Определяет смещение позиции относительно триггера, который вызывает всплывающее окно.\n     **/\n    triggerOffset?: number,\n    /**\n     * Задает смещение относительно контейнера, в котором находится.\n     **/\n    containerOffset?: number,\n    /**\n     * Определяет смещение стрелки.\n     **/\n    arrowOffset?: number,\n    preferX?: Options['preferX'],\n    preferY?: Options['preferY'],\n    /**\n     * Определяет, какой контент будет отображаться внутри всплывающего окна.\n     **/\n    render?: ReactNode | (() => ReactNode),\n    hoverOptions?: UseHoverOptions,\n    /**\n     * Определяет, должна ли стрелка быть отображена внутри всплывающего блока.\n     **/\n    arrow?: boolean,\n    arrowOptions?: {\n        angle?: number,\n        size?: number,\n        roundness?: number,\n        borderWidth?: number,\n        borderColor?: string,\n        backgroundColor?: string\n    }\n}\n\n/**\n * Компонент `Popover` используется для отображения содержимого во всплывающем блоке при клике или наведении на указанный элемент-триггер. Поповер может использоваться для отображения дополнительной информации, подсказок или контекстного меню.\n **/\nexport const Popover = ({ trigger = 'click', auto = true, placement = 'bottom-center', ...props }: IProps) => {\n    const cn = useClassnames(style, props.className);\n    const [isOpen, setIsOpen] = useState(!!props.defaultIsOpen);\n    const [isOver, hoverProps] = useHover(props.hoverOptions);\n    const $trigger = useRef<HTMLElement>(null);\n\n    const onClose = useCallback(() => {\n        setIsOpen(false);\n    }, []);\n\n    const { renderLayer, triggerProps, layerProps, arrowProps } = useLayer({\n        isOpen           : trigger === 'hover' ? isOver : isOpen,\n        onOutsideClick   : onClose,\n        onDisappear      : onClose,\n        container        : $trigger.current?.parentElement ?? undefined,\n        overflowContainer: props.overflowContainer,\n        triggerOffset    : props.triggerOffset,\n        containerOffset  : props.containerOffset,\n        arrowOffset      : props.arrowOffset,\n        preferX          : props.preferX,\n        preferY          : props.preferY,\n        auto,\n        placement\n    });\n\n    const elTrigger = useMemo(() => {\n        let attrs: Record<string, unknown> = {\n            ref: mergeRefs($trigger, triggerProps.ref)\n        };\n\n        if(trigger === 'hover') {\n            attrs = {\n                ...attrs,\n                ...hoverProps\n            };\n        } else {\n            attrs.onClick = (e: MouseEvent) => {\n                e.preventDefault();\n\n                setIsOpen((state) => !state);\n            };\n        }\n\n        if(isElement(props.children)) {\n            return cloneElement(props.children, attrs);\n        }\n\n        if(props.children) {\n            return (\n                <div\n                    {...attrs}\n                    children={props.children}\n                />\n            );\n        }\n    }, [props.children, trigger, hoverProps, triggerProps]);\n\n    const elArrow = useMemo(() => {\n        if(props.arrow) {\n            return (\n                <Arrow\n                    {...props.arrowOptions}\n                    {...arrowProps}\n                />\n            );\n        }\n    }, [props.arrow, props.arrowOptions, arrowProps]);\n\n    const elContent = useMemo(() => {\n        if(isOpen || trigger === 'hover' && isOver) {\n            return renderLayer(\n                <div\n                    {...layerProps}\n                    className={cn('popover__content')}\n                >\n                    {typeof props.render === 'function' ? props.render() : props.render}\n                    {elArrow}\n                </div>\n            );\n        }\n    }, [isOpen, isOver, trigger, layerProps, elArrow, renderLayer]);\n\n    return (\n        <Fragment>\n            {elTrigger}\n            {elContent}\n        </Fragment>\n    );\n};\n"],"names":["_defineProperties","target","props","i","descriptor","_createClass","Constructor","protoProps","staticProps","_extends","source","key","_inheritsLoose","subClass","superClass","_setPrototypeOf","o","p","_objectWithoutPropertiesLoose","excluded","sourceKeys","_unsupportedIterableToArray","minLen","_arrayLikeToArray","n","arr","len","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","useTrackRef","onRefChange","storedReference","useRef","setter","element","useMutableStore","initialState","state","useMemo","set","get","useEventSubscriptions","subscriptions","hasEventSubscriptions","removeAllEventSubscriptions","_iterator","_step","unsubscribe","addEventSubscription","unsubscriber","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","useLastState","currentState","enabled","lastState","getPixelValue","value","limit","min","max","isSet","mergeRefs","_len","refs","_key","ref","getResizeObserver","environment","polyfill","findScrollContainers","result","_environment$getCompu","overflow","overflowX","overflowY","prop","createReferenceError","subject","useTrackElements","_ref","onChange","ResizeObserverPolyfill","overflowContainer","triggerOption","ResizeObserver","arrowRef","hasTriggerOption","_useMutableStore","_useEventSubscription","handleChange","useCallback","_get","layer","trigger","scrollContainers","closestScrollContainer","scrollOffsets","scrollLeft","scrollTop","scrollX","scrollY","borderOffsets","_environment$getCompu2","borderLeftWidth","borderTopWidth","addEventListeners","_get2","ignoredInitialCall","observerCallback","observer","_i","_arr","_i2","_arr2","_element","listenForScrollElements","_loop","resetWhenReferenceChangedWhileTracking","previous","next","layerRef","_get3","previousLayer","getScrollContainers","position","closestScrollContainerHasCorrectStyling","triggerRef","_get4","previousTrigger","triggerOptionParent","GroupContext","createContext","GroupProvider","children","registrations","handleRegister","registration","createElement","getShouldCloseAccordingToChildren","event","shouldCloseWhenClickedOutside","useGroup","_ref2","isOpen","onOutsideClick","onParentClose","possibleRegisterFn","useContext","clickedOnTrigger","clickedOnLayer","shouldCloseAccordingToChildren","_ref3","closeChild","isChild","shouldNotListen","handleClick","_ref4","PLACEMENT_TYPES","OPPOSITES","SideBase","opposite","isHorizontal","sizeProp","oppositeSizeProp","cssProp","oppositeCssProp","isCenter","isPush","_proto","side","createSide","recursive","BoundSide","Side","SIDES","BoundsOffsets","offsets","boundsOffsets","first","rest","boundsOffset","_iterator2","_step2","_this","_this2","sumOfPropertyValues","propertyValues","sum","propertyValue","boundsToObject","top","left","right","bottom","width","height","EMPTY","Bounds","bounds","options","_options","_options$withTransfor","withTransform","_options$environment","_options$withScrollba","withScrollbars","plain","boxSizing","borderLeft","borderRight","borderTop","borderBottom","paddingLeft","paddingRight","paddingTop","paddingBottom","boxWidth","boxHeight","scrollbarWidth","scrollbarHeight","_environment$document","scrollingElement","_ref2$clientWidth","_ref2$clientHeight","partialBoundsOrMergeFn","current","entries","_entries","_entries$_i","boundSide","child","mapper","boundSides","_boundSides","Placement","primary","secondary","subjectBounds","layerDimensions","dimensions","secondaryOffset","subjectsBounds","arrow","arrowOffsetBase","limitMin","limitMax","propertyA","propertyB","sec","triggerValue","arrowCompensation","layerBounds","container","_this$subjectsBounds","triggerHasBiggerWidth","triggerHasBiggerHeight","containerOffsets","substract","_Object$entries$map$f","_Object$entries$map$f2","_ref5","_ref6","a","b","mostNegativeSide","PlacementCenter","_Placement","_proto2","_this$subjectsBounds2","getNegativeOffsetBetweenLayerCenterAndTrigger","placement","arrowOffset","sizeProperty","sideA","sideB","offsetA","offsetB","STYLE_BASE","getArrowStyle","_extends2","triggerIsBigger","negativeOffset","primarySide","secondarySide","secondaryValue","Placements","placements","config","type","_type$split","getListOfPlacements","preferedPlacement","_Placements$getSidesF","preferredSide","placementFrom","list","_this$placements$map$","placementWithBiggestSurface","_this$config","auto","snap","placementsOnSameSide","currentPlacementHasHighestPriority","firstPlacementThatDoesNotFit","secondaryOffsetSide","factor","layerStyleBase","hasFullyDisappeared","suitablePlacement","styles","layerSide","SubjectsBounds","parent","getTriggerBounds","window","allContainers","scrollContainer","GLOBAL_CONTAINER","DEFAULT_OPTIONS","useLayer","_triggerBoundsRef$cur","_ref$isOpen","_ref$overflowContaine","_ref$environment","_ref$placement","_ref$possiblePlacemen","possiblePlacements","_ref$preferX","preferX","_ref$preferY","preferY","_ref$auto","_ref$snap","_ref$triggerOffset","triggerOffset","_ref$containerOffset","containerOffset","_ref$arrowOffset","_ref$container","_ref$layerDimensions","onDisappear","_useState","useState","setState","triggerBoundsRef","repositioningToken","handlePositioning","_Placements$create$re","hasDisappeared","newState","didStateChange","token","_useTrackElements","_useGroup","closeOnOutsideClickRefs","createPortal","getContainerElement","styleProps","_styleProps","DEFAULT_CONTAINER_ID","_excluded","LEFT","TOP","BOTTOM","RIGHT","getWidthBasedOnAngle","angle","size","getViewBox","sizeA","sizeB","borderWidth","_map","map","getTrianglePath","roundness","_BOTTOM$TOP$RIGHT$LEF","_BOTTOM$TOP$RIGHT$LEF2","_BOTTOM$TOP$RIGHT$LEF3","relativeRoundness","A","B","cPoint","c1A","c1B","C","d1A","d1B","D","getBorderMaskPath","borderOffset","Arrow","forwardRef","_ref2$size","_ref2$angle","_ref2$borderWidth","_ref2$borderColor","borderColor","_ref2$roundness","_ref2$backgroundColor","backgroundColor","_ref2$layerSide","_ref2$style","style","maxSize","Status","useHover","_temp","_ref$delayEnter","delayEnter","_ref$delayLeave","delayLeave","_ref$hideOnScroll","hideOnScroll","show","setShow","timeout","status","hasTouchMoved","removeTimeout","onMouseEnter","onMouseLeave","_","immediate","onScroll","hoverProps","Popover","cn","useClassnames","setIsOpen","isOver","$trigger","onClose","renderLayer","triggerProps","layerProps","arrowProps","_a","elTrigger","attrs","e","isElement","cloneElement","jsx","elArrow","elContent","jsxs","Fragment"],"mappings":"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","x_google_ignoreList":[0]}